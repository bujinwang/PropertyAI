# Test Design: Story 23.3 - Customizable Templates

Date: 2025-09-18
Story: 23.3 - Customizable Templates and Reports

## Test Strategy Overview

Unit, integration, E2E for template editor, apply HOC, export. Target 100% coverage, regression for dashboard.

### P0 Scenarios (Must Have)
1. **Template Editor (AC1)**
   - Verify AlertTemplatesEditor modal opens, component selection (checkboxes), save validation (name required).
   - Test: Jest unit for state toggle, save call with layout JSON; E2E Cypress open modal, select components, save, assert service call.

2. **Apply Templates (AC2)**
   - Verify TemplateApplier loads JSON layout, renders available components, fallback to children.
   - Test: Jest unit for render with/without template, mock service (assert applyTemplate filter); E2E apply template, assert layout (alerts/chart rendered).

3. **Export Reports (AC3)**
   - Verify export to PDF/CSV via service, branded formatting stub.
   - Test: Jest mock export, assert filename/format; E2E button click, download assertion.

4. **Role-Based Sharing (AC4)**
   - Verify save/get with role filter, sharedWith array.
   - Test: Integration DB mock for role query, assert shared templates returned.

### P1 Scenarios (High Priority)
1. **Integration with Existing (AC5-7)**
   - Verify unchanged when no template; data sources integration (alerts/predictions).
   - Test: Regression for dashboard (no template); integration service with mock DB.

### P2 Scenarios (Medium Priority)
1. **No Regressions (AC10)**
   - Run Epic 21 dashboard tests.

## Test Types and Coverage
- **Unit Tests**: 70% - Editor state/save, Applier render/filter.
- **Integration Tests**: 30% - Service save/retrieve with DB.
- **E2E Tests**: 100% - Modal flow, apply, export download.
- **Performance Tests**: JSON size <10KB validation.

## Test Data Requirements
- Mock templates JSON, components array.
- DB fixtures for UserTemplates.

## Risks and Mitigations
- Risk: JSON serialization failure. Mitigation: Validation in service test.
- Risk: HOC prop conflicts. Mitigation: Fallback to children tested.

Coverage Target: 100% for new code.