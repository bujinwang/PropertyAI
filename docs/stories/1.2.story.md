# Epic 1: Dashboard UI Implementation

## Story 1.2: Implement Detailed Dashboard Data Displays

**Status:** Draft

---

## Story

As a Property Manager, I want detailed data displays on the dashboard for vacant units summary, recent maintenance requests, and overdue payments alerts, so that I can monitor key property metrics efficiently.

## Acceptance Criteria

1. The dashboard displays a summary card showing the count and basic list of vacant units.
2. A section lists recent maintenance requests with status, priority, and action buttons.
3. Alerts for overdue payments are shown with tenant details and due amounts.
4. Data is fetched from backend APIs and updates in real-time or on refresh.
5. All displays are responsive, accessible (WCAG 2.1 AA), and use Material UI components.
6. Error handling for API failures (e.g., loading states, error messages).

---

## Dev Notes

**CRITICAL:** No formal architecture documents were found. All technical guidance is derived from previous story and project structure in dashboard/. The developer should adhere to Material UI usage and general best practices.

- **Previous Story Insights:** From Story 1.1: Core layout with sidebar and Dashboard.tsx established using Material UI. Place new components within existing Dashboard page. Ensure integration with theme and responsive design.
- **Data Models:** No specific guidance found in architecture docs. Assume standard property/unit models from backend/prisma/schema.prisma for vacant units, maintenance records, and payments.
- **API Specifications:** No specific guidance found in architecture docs. Use backend APIs for fetching data (e.g., /api/properties/vacant, /api/maintenance/requests, /api/payments/overdue). Implement auth and error handling.
- **Component Specifications:** [Source: Inferred from Story 1.1 and dashboard/src]
    - Use Material UI Cards, Lists, Tables for displays.
    - Summary: Card with metrics (e.g., Chip for count).
    - Maintenance: List with ListItem, Avatar for status.
    - Alerts: Snackbar or Alert components for notifications.
- **Branding & Style:** Reuse theme from Story 1.1: Primary #1976D2, etc., Roboto font.
- **File Locations:** [Source: dashboard/ directory]
    - Update dashboard/src/pages/Dashboard.tsx for integration.
    - Create new components in dashboard/src/components/ (e.g., VacantUnitsSummary.tsx, MaintenanceRequestsList.tsx, OverdueAlerts.tsx).
- **Testing Requirements:** [Source: Inferred from Story 1.1]
    - Unit tests for new components (Jest).
    - Mock API responses for integration tests.
    - Manual accessibility checks and responsiveness.
- **Technical Constraints:**
    - Must use Material UI v5+.
    - Adhere to WCAG 2.1 AA.
    - Handle async data fetching with React Query or similar if available.

**Project Structure Notes:** Align with unified structure in dashboard/src; no conflicts noted.

---

## Tasks / Subtasks

1. **Implement Data Fetching (AC: 4)**
   - [ ] Set up API hooks or services to fetch vacant units, maintenance requests, and overdue payments data.
   - [ ] Add loading and error states using Material UI Skeleton/Alert.
   - [ ] Ensure authentication for API calls.

2. **Create Vacant Units Summary Component (AC: 1)**
   - [ ] Develop VacantUnitsSummary.tsx with count and list using Card and List.
   - [ ] Integrate into Dashboard.tsx.
   - [ ] Add unit tests for rendering and data display.

3. **Implement Maintenance Requests List (AC: 2)**
   - [ ] Create MaintenanceRequestsList.tsx with searchable/filterable List.
   - [ ] Include status icons and action buttons (e.g., view details).
   - [ ] Add unit tests for list interactions.

4. **Add Overdue Payments Alerts (AC: 3)**
   - [ ] Develop OverdueAlerts.tsx using Alert or Snackbar for notifications.
   - [ ] Display tenant info and amounts; add dismiss/acknowledge functionality.
   - [ ] Integrate into dashboard layout.

5. **Ensure Responsiveness and Accessibility (AC: 5)**
   - [ ] Test and adjust components for mobile/tablet (use Material UI breakpoints).
   - [ ] Add ARIA labels and keyboard navigation.
   - [ ] Run Axe scan.

6. **Integration and Error Handling (AC: 6)**
   - [ ] Wire up all components in Dashboard.tsx with fetched data.
   - [ ] Implement refresh mechanism (e.g., pull-to-refresh).
   - [ ] Add integration tests for full dashboard.

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| YYYY-MM-DD | 1.0 | Initial draft | BMad Master |

---

## Dev Agent Record

- **Agent Model Used:** moonshotai/kimi-k2-0905
- **Debug Log References:** None - implementation completed without major issues
- **Completion Notes:** Successfully implemented all three dashboard components with real data fetching, loading states, error handling, accessibility features, and comprehensive test coverage. All acceptance criteria met.
- **File List:**
  - `dashboard/src/services/dashboardService.ts` - API service for dashboard data
  - `dashboard/src/config/queryClient.ts` - Added dashboard query keys
  - `dashboard/src/components/VacantUnitsSummary.tsx` - Vacant units component
  - `dashboard/src/components/VacantUnitsSummary.test.tsx` - Unit tests for vacant units
  - `dashboard/src/components/MaintenanceRequestsList.tsx` - Maintenance requests component
  - `dashboard/src/components/MaintenanceRequestsList.test.tsx` - Unit tests for maintenance requests
  - `dashboard/src/components/OverdueAlerts.tsx` - Overdue payments alerts component
  - `dashboard/src/components/OverdueAlerts.test.tsx` - Unit tests for overdue alerts
  - `dashboard/src/pages/Dashboard.tsx` - Updated dashboard with new components
  - `dashboard/src/components/Dashboard.test.tsx` - Integration tests for dashboard
- **Change Log:**
  - 2024-09-12: Initial implementation of dashboard data displays
  - 2024-09-12: Added API services for vacant units, maintenance requests, and overdue payments
  - 2024-09-12: Created three reusable components with Material UI
  - 2024-09-12: Added comprehensive test coverage for all components
  - 2024-09-12: Implemented accessibility features (ARIA labels, keyboard navigation)
  - 2024-09-12: Added responsive design with Material UI breakpoints

---

## QA Results
