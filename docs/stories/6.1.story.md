# Story 6.1: Payment Processing UI

**Status:** Completed

## Acceptance Criteria
- Create a payment list view with search, filtering, and pagination functionality
- Implement a payment form modal for recording new payments with validation
- Support multiple payment methods (cash, check, bank transfer, credit card, etc.)
- Associate payments with specific tenants and lease agreements
- Display comprehensive payment history with transaction details and status
- Include date range filtering and payment status tracking
- Ensure responsive design across desktop and mobile devices
- Maintain accessibility standards (WCAG 2.1 AA compliance)
- Provide export functionality for payment records

## Dev Notes
No specific guidance found in architecture docs. Infer from backend/prisma/schema.prisma: Assume Payment model with fields id (PK), tenantId (FK to Tenant), leaseId (FK to Lease), amount (decimal, required), paymentMethod (enum: 'cash' | 'check' | 'bank_transfer' | 'credit_card'), paymentDate (date, required), status (enum: 'pending' | 'completed' | 'failed'), notes (string, optional), createdAt/updatedAt. Relations: Many-to-one with Tenant/Lease. No changes to existing models.

API Integration: Extend dashboardService.ts with methods getPayments(page, search, filter), createPayment(data), updatePayment(id, data), deletePayment(id). Use POST /api/payments, PUT /api/payments/{id}, DELETE /api/payments/{id}, GET /api/payments?search={q}&page={n}&limit=10&status={s}&dateFrom={d1}&dateTo={d2}. Include auth headers. Error handling with try-catch.

UI Patterns: Follow MaintenanceRequestList/PaymentForm from Story 5.1: Material UI Table for list, Dialog for forms, Autocomplete/TextField/Select for inputs, DatePicker for dates. Integrate with existing theme.

Testing: Add unit tests for components (form validation, list rendering), integration tests for API mocks, snapshot tests. Use Jest/RTL, mock dashboardService.

Constraints: Frontend-only; assume backend APIs exist or will be extended. No schema migrations. Ensure no conflicts with existing routes.

## Tasks
- [ ] Create PaymentList.tsx in src/pages/ with Table, search bar, filter dropdowns (status/method/date range), pagination, actions (edit/delete).
- [ ] Create PaymentForm.tsx in src/components/ with Formik, fields (tenant/lease Autocomplete, amount TextField, method/status Select, date DatePicker, notes Textarea), validation schema.
- [ ] Update dashboardService.ts: Add payment API methods with async/await, error parsing.
- [ ] Update App.tsx: Add route for /payments -> PaymentList.
- [ ] Update Layout.tsx: Add sidebar link to /payments.
- [ ] Implement delete confirmation Dialog in PaymentList.
- [ ] Add Snackbar for notifications.
- [ ] Write tests: PaymentList.test.tsx, PaymentForm.test.tsx.
- [ ] Validate with story-draft-checklist.md and update status to In Progress.

## Dev Agent Record
[Implementation details to be added after development]