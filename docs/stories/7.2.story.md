# Story 7.2: Document Organization and Search

**Status:** In Progress

## Acceptance Criteria
- Implement document categorization with folders and subfolders
- Create tagging system for documents with custom tags
- Develop advanced search functionality by name, content, tags, and metadata
- Add document sharing capabilities with tenants and other users
- Include bulk operations for moving, tagging, and deleting documents
- Provide document versioning and change history
- Implement document access permissions and security controls
- Create document templates for common property management documents
- Ensure search results are fast and accurate with pagination
- Include document analytics and usage statistics

## Dev Notes
No specific guidance found in architecture docs. Infer from backend/prisma/schema.prisma: Extend Document model with folderId (FK to Folder), tags (string array), sharedWith (array of user IDs), version (int), permissions (enum/object). Add Folder model with name, parentId, createdBy. Relations: Many-to-one with Folder, many-to-many with User for sharing.

API Integration: Extend dashboardService.ts with methods createFolder(data), getFolders(), moveDocument(id, folderId), addTags(id, tags), searchDocuments(query, filters), shareDocument(id, userIds), getDocumentVersions(id). Use POST /api/folders, GET /api/folders, PUT /api/documents/{id}/move, PUT /api/documents/{id}/tags, GET /api/documents/search?q={query}&tags={t}&folder={f}, POST /api/documents/{id}/share, GET /api/documents/{id}/versions. Include auth headers.

UI Patterns: Follow OverduePaymentsList from Story 6.2: Material UI TreeView for folders, Chip for tags, advanced search form, Dialog for sharing/permissions. Integrate with existing theme.

Testing: Add unit tests for search logic, folder operations; integration tests for API mocks and bulk operations.

Constraints: Frontend-only; assume backend handles search indexing. No schema changes. Ensure no conflicts with existing routes.

## Tasks
- [ ] Create DocumentSearch.tsx in src/pages/ with advanced search form, results table, filters.
- [ ] Create FolderTree.tsx in src/components/ with TreeView for folder navigation, create/move operations.
- [ ] Create DocumentTags.tsx in src/components/ with tag management, bulk tagging.
- [ ] Update dashboardService.ts: Add folder/search API methods.
- [ ] Update App.tsx: Add routes for /documents/search -> DocumentSearch.
- [ ] Update Layout.tsx: Add sidebar sub-menu for documents.
- [ ] Implement document sharing Dialog with user selection.
- [ ] Add bulk operations for selected documents.
- [ ] Write tests: DocumentSearch.test.tsx, FolderTree.test.tsx.
- [ ] Validate with story-draft-checklist.md and update status to In Progress.

## Dev Agent Record
[Implementation details to be added after development]